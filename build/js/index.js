(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,n=window.wp.components,a=((0,t.__)("The plugin is not working.","wp-plugin-feedback"),(0,t.__)("It didn’t meet my expectations.","wp-plugin-feedback"),(0,t.__)("I found a better plugin.","wp-plugin-feedback"),(0,t.__)("I no longer need this plugin.","wp-plugin-feedback"),(0,t.__)("It’s a temporary deactivation.","wp-plugin-feedback"),({onClose:a,onSubmit:o,isSubmitting:l})=>{const[i,c]=(0,e.useState)(""),[d,r]=(0,e.useState)(""),[u,s]=(0,e.useState)(!1),p=e=>{e.preventDefault(),o({reason:i,details:d,isAnonymous:u})};return(0,e.createElement)(n.Modal,{title:(0,t.__)("We’re sorry to see you go!","wp-plugin-feedback"),onRequestClose:a,shouldCloseOnClickOutside:!0,className:"custom-deactivation-modal"},(0,e.createElement)("h3",null,(0,t.__)("Can you help us improve by sharing your feedback?","wp-plugin-feedback")),(0,e.createElement)("textarea",{name:"details",value:d,onChange:e=>r(e.target.value),placeholder:(0,t.__)("The plugin doesn't meet our expectations because…","wp-plugin-feedback"),rows:"8",cols:"50",style:{width:"100%"}}),(0,e.createElement)("p",null,(0,e.createInterpolateElement)((0,t.__)("By submitting feedback, you agree to our <a>Privacy Policy</a>.","wp-plugin-feedback"),{a:(0,e.createElement)("a",{href:"https://quadlayers.com/legal/privacy-policy/",target:"_blank",rel:"noreferrer"})})),(0,e.createElement)("div",{className:"components-modal__footer"},(0,e.createElement)(n.Button,{isPrimary:!0,onClick:p,disabled:l},(0,t.__)("Submit & Deactivate","wp-plugin-feedback")),(0,e.createElement)(n.Button,{isSecondary:!0,onClick:p,disabled:l},(0,t.__)("Deactivate","wp-plugin-feedback")),l&&(0,e.createElement)(n.Spinner,null),(0,e.createElement)("span",null,(0,e.createElement)("input",{type:"checkbox",name:"isAnonymous",onChange:e=>s(e.target.value)}),(0,t.__)("Send anonymously","wp-plugin-feedback"))))}),o=()=>{const[t,n]=(0,e.useState)(!1),[o,l]=(0,e.useState)(null),[i,c]=(0,e.useState)(!1);return window.ReactModalManager={open:e=>{l(e),n(!0)},close:()=>{n(!1),l(null)}},(0,e.createElement)(e.Fragment,null,t&&(0,e.createElement)(a,{onClose:()=>n(!1),onSubmit:async({reason:e,details:t,isAnonymous:n})=>{c(!0),fetch(window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"quadlayers_send_feedback",plugin_basename:o.pluginBase,feedback_reason:e,feedback_details:t,is_anonymous:n,nonce:window.quadlayersPluginFeedback.nonce})}).then((e=>e.json())).then((e=>{})).catch((e=>{})).finally((()=>{window.location.href=o.deactivateUrl,c(!1)}))},isSubmitting:i}))};document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("wpbody-content"),n=document.createElement("div");t.insertBefore(n,t.lastElementChild),(0,e.createRoot)(n).render((0,e.createElement)(o,null))})),document.addEventListener("DOMContentLoaded",(function(){window.quadlayersPluginFeedback.plugins&&window.quadlayersPluginFeedback.plugins.forEach((e=>{const t=document.querySelector(`#the-list tr[data-plugin="${e}"]`);if(t){const e=t.querySelector(".deactivate a");e&&e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href");!function(e,t){"undefined"!=typeof ReactModalManager&&ReactModalManager.open({pluginBase:e,deactivateUrl:t})}(pluginBase,t)}))}}))}))})();