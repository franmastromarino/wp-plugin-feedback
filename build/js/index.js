(()=>{"use strict";const e=window.wp.element,n=window.wp.i18n,t=window.wp.components,a=((0,n.__)("The plugin is not working.","wp-plugin-feedback"),(0,n.__)("It didn’t meet my expectations.","wp-plugin-feedback"),(0,n.__)("I found a better plugin.","wp-plugin-feedback"),(0,n.__)("I no longer need this plugin.","wp-plugin-feedback"),(0,n.__)("It’s a temporary deactivation.","wp-plugin-feedback"),({onClose:a,onSubmit:l,isSubmitting:o})=>{const[i,u]=(0,e.useState)(""),[c,d]=(0,e.useState)(""),[r,s]=(0,e.useState)(!1),p=e=>{e.preventDefault(),l({reason:i,details:c,isAnonymous:r})};return(0,e.createElement)(t.Modal,{title:(0,n.__)("We’re sorry to see you go!","wp-plugin-feedback"),onRequestClose:a,shouldCloseOnClickOutside:!0,className:"custom-deactivation-modal"},(0,e.createElement)("h3",null,(0,n.__)("Can you help us improve by sharing your feedback?","wp-plugin-feedback")),(0,e.createElement)("textarea",{name:"details",value:c,onChange:e=>d(e.target.value),placeholder:(0,n.__)("The plugin doesn't meet our expectations because…","wp-plugin-feedback"),rows:"8",cols:"50",style:{width:"100%"}}),(0,e.createElement)("p",null,(0,e.createInterpolateElement)((0,n.__)("By submitting feedback, you agree to our <a>Privacy Policy</a>.","wp-plugin-feedback"),{a:(0,e.createElement)("a",{href:"https://quadlayers.com/legal/privacy-policy/",target:"_blank",rel:"noreferrer"})})),(0,e.createElement)("div",{className:"components-modal__footer"},(0,e.createElement)(t.Button,{isPrimary:!0,onClick:p,disabled:o},(0,n.__)("Submit & Deactivate","wp-plugin-feedback")),(0,e.createElement)(t.Button,{isSecondary:!0,onClick:p,disabled:o},(0,n.__)("Deactivate","wp-plugin-feedback")),o&&(0,e.createElement)(t.Spinner,null),(0,e.createElement)("span",null,(0,e.createElement)("input",{type:"checkbox",name:"isAnonymous",onChange:e=>s(e.target.value)}),(0,n.__)("Send anonymously","wp-plugin-feedback"))))}),l=()=>{const[n,t]=(0,e.useState)(!1),[l,o]=(0,e.useState)(null),[i,u]=(0,e.useState)(!1);return window.ReactModalManager={open:e=>{o(e),t(!0)},close:()=>{t(!1),o(null)}},(0,e.createElement)(e.Fragment,null,n&&(0,e.createElement)(a,{onClose:()=>t(!1),onSubmit:async({reason:e,details:n,isAnonymous:t})=>{u(!0),fetch(window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"quadlayers_send_feedback",plugin_slug:l.pluginSlug,plugin_version:l.pluginVersion,feedback_reason:e,feedback_details:n,is_anonymous:t,nonce:window.quadlayersPluginFeedback.nonce})}).then((e=>e.json())).then((e=>{})).catch((e=>{})).finally((()=>{window.location.href=l.deactivateUrl,u(!1)}))},isSubmitting:i}))};document.addEventListener("DOMContentLoaded",(()=>{const n=document.getElementById("wpbody-content"),t=document.createElement("div");n.insertBefore(t,n.lastElementChild),(0,e.createRoot)(t).render((0,e.createElement)(l,null))})),document.addEventListener("DOMContentLoaded",(function(){window.quadlayersPluginFeedback.plugins&&Object.keys(window.quadlayersPluginFeedback.plugins).forEach((e=>{const n=document.querySelector(`#the-list tr[data-plugin="${e}"]`);if(n){const t=window.quadlayersPluginFeedback.plugins[e].version,a=window.quadlayersPluginFeedback.plugins[e].slug,l=n.querySelector(".deactivate a");l&&l.addEventListener("click",(function(e){e.preventDefault();const n=this.getAttribute("href");!function(e,n,t){"undefined"!=typeof ReactModalManager&&ReactModalManager.open({pluginSlug:e,pluginVersion:n,deactivateUrl:t})}(a,t,n)}))}}))}))})();